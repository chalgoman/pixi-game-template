{"version":3,"sources":["../../../../../../../src/core/renderers/webgl/systems/shader/shader/extractUniforms.js"],"names":["extractUniforms","gl","program","uniforms","totalUniforms","getProgramParameter","ACTIVE_UNIFORMS","i","uniformData","getActiveUniform","name","replace","type","size","location","getUniformLocation","value"],"mappings":";;;kBAWwBA,e;;AAXxB;;;;AACA;;;;;;AAEA;;;;;;;;AAQe,SAASA,eAAT,CAAyBC,EAAzB,EAA6BC,OAA7B,EACf;AACI,QAAMC,WAAW,EAAjB;;AAEA,QAAMC,gBAAgBH,GAAGI,mBAAH,CAAuBH,OAAvB,EAAgCD,GAAGK,eAAnC,CAAtB;;AAEA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,aAApB,EAAmCG,GAAnC,EACA;AACI,YAAMC,cAAcP,GAAGQ,gBAAH,CAAoBP,OAApB,EAA6BK,CAA7B,CAApB;AACA,YAAMG,OAAOF,YAAYE,IAAZ,CAAiBC,OAAjB,CAAyB,SAAzB,EAAoC,EAApC,CAAb;AACA,YAAMC,OAAO,uBAAQX,EAAR,EAAYO,YAAYI,IAAxB,CAAb;;AAEAT,iBAASO,IAAT,IAAiB;AACbE,sBADa;AAEbC,kBAAML,YAAYK,IAFL;AAGbC,sBAAUb,GAAGc,kBAAH,CAAsBb,OAAtB,EAA+BQ,IAA/B,CAHG;AAIbM,mBAAO,4BAAaJ,IAAb,EAAmBJ,YAAYK,IAA/B;AAJM,SAAjB;AAMH;;AAED,WAAOV,QAAP;AACH","file":"extractUniforms.js","sourcesContent":["import mapType from './mapType';\nimport defaultValue from './defaultValue';\n\n/**\n * Extracts the uniforms\n * @class\n * @memberof PIXI.glCore.shader\n * @param gl {WebGLRenderingContext} The current WebGL rendering context\n * @param program {WebGLProgram} The shader program to get the uniforms from\n * @return uniforms {Object}\n */\nexport default function extractUniforms(gl, program)\n{\n    const uniforms = {};\n\n    const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (let i = 0; i < totalUniforms; i++)\n    {\n        const uniformData = gl.getActiveUniform(program, i);\n        const name = uniformData.name.replace(/\\[.*?\\]/, '');\n        const type = mapType(gl, uniformData.type);\n\n        uniforms[name] = {\n            type,\n            size: uniformData.size,\n            location: gl.getUniformLocation(program, name),\n            value: defaultValue(type, uniformData.size),\n        };\n    }\n\n    return uniforms;\n}\n"]}