{"version":3,"sources":["../../../src/core/utils/getTestContext.js"],"names":["getTestContext","context","canvas","document","createElement","gl","PREFER_WEBGL_2","getContext","Error","getExtension"],"mappings":";;;kBAYwBA,c;;AAZxB;;;;;;AAEA,IAAIC,UAAU,IAAd;;AAEA;;;;;;;;AAQe,SAASD,cAAT,GACf;AACI,QAAI,CAACC,OAAL,EACA;AACI,YAAMC,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAf;;AAEA,YAAIC,WAAJ;;AAEA,YAAI,mBAASC,cAAb,EACA;AACID,iBAAKH,OAAOK,UAAP,CAAkB,QAAlB,EAA4B,EAA5B,CAAL;AACH;;AAED,YAAI,CAACF,EAAL,EACA;AACIA,iBAAKH,OAAOK,UAAP,CAAkB,OAAlB,EAA2B,EAA3B,KACFL,OAAOK,UAAP,CAAkB,oBAAlB,EAAwC,EAAxC,CADH;;AAGA,gBAAI,CAACF,EAAL,EACA;AACI;AACA,sBAAM,IAAIG,KAAJ,CAAU,oEAAV,CAAN;AACH,aAJD,MAMA;AACI;AACAH,mBAAGI,YAAH,CAAgB,oBAAhB;AACH;AACJ;;AAEDR,kBAAUI,EAAV;;AAEA,eAAOA,EAAP;AACH;;AAED,WAAOJ,OAAP;AACH","file":"getTestContext.js","sourcesContent":["import settings from '../settings';\n\nlet context = null;\n\n/**\n * returns a little webGL context to use for program inspection.\n *\n * @static\n * @private\n * @returns {webGL-context} a gl context to test with\n */\n\nexport default function getTestContext()\n{\n    if (!context)\n    {\n        const canvas = document.createElement('canvas');\n\n        let gl;\n\n        if (settings.PREFER_WEBGL_2)\n        {\n            gl = canvas.getContext('webgl2', {});\n        }\n\n        if (!gl)\n        {\n            gl = canvas.getContext('webgl', {})\n            || canvas.getContext('experimental-webgl', {});\n\n            if (!gl)\n            {\n                // fail, not able to get a context\n                throw new Error('This browser does not support webGL. Try using the canvas renderer');\n            }\n            else\n            {\n                // for shader testing..\n                gl.getExtension('WEBGL_draw_buffers');\n            }\n        }\n\n        context = gl;\n\n        return gl;\n    }\n\n    return context;\n}\n"]}